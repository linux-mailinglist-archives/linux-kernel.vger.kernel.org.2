Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 84A5B390C02
	for <lists+linux-kernel@lfdr.de>; Wed, 26 May 2021 00:15:25 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S232270AbhEYWQx (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Tue, 25 May 2021 18:16:53 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:39920 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S232129AbhEYWQv (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Tue, 25 May 2021 18:16:51 -0400
Received: from mail-wm1-x331.google.com (mail-wm1-x331.google.com [IPv6:2a00:1450:4864:20::331])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 3E67AC061756
        for <linux-kernel@vger.kernel.org>; Tue, 25 May 2021 15:15:21 -0700 (PDT)
Received: by mail-wm1-x331.google.com with SMTP id f20-20020a05600c4e94b0290181f6edda88so7455444wmq.2
        for <linux-kernel@vger.kernel.org>; Tue, 25 May 2021 15:15:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=philpotter-co-uk.20150623.gappssmtp.com; s=20150623;
        h=date:from:to:cc:subject:message-id:references:mime-version
         :content-disposition:in-reply-to;
        bh=lwWvg+8eBSUrALdD90b3evPDsvDCWlcbDSlk/RnjE4I=;
        b=HiiwB5vFM/WlazygqEXLUp6F9b2XjW1GlGXYxdLPHmuxzY+oPyrI62Zjbt1H/+Wkay
         u1TOebUXzsbpGqNQWMtnFUUr8KYgWBH5FUP6KUIhAs5UWloevmL6Q3/qOGt+gtahZsUQ
         0biPoOWIYu90sydoep9XF1SkGoa1TJLdO9Ps+mE3ztY8K92NZP4j6hhFGsfX+Bp1hLoO
         K5dZAmts+aqXkkfNb0VVJdxNz98ExbxoLdtjbdJJSsHoytGC07b/riApoJrveg+YsKYa
         z63jKmJblDbnbRhaIqytDk2abj2a/9fXWPFQEQmwm53yAPxrrZ1LRYUjMX9lj/85XlVH
         KVKQ==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:date:from:to:cc:subject:message-id:references
         :mime-version:content-disposition:in-reply-to;
        bh=lwWvg+8eBSUrALdD90b3evPDsvDCWlcbDSlk/RnjE4I=;
        b=DHgFk/E5GRmKSKAn5bHfkawRes4eP07sx+nz/bBcDXKJVRqJJ35kZxhdB+yBEhLW+0
         eDOLRZX9CtKXh0jWEDmA9PtgMnATKk+HilT35KlOMpz1vcNqAtDlWmnxVLq1xqUI5/Y3
         b+iYl8wKww+aLUqpaBXRmweHq+9fEgYxLEDHcBYkbIKnEx8MkHPgUTiXLdIc3sa5nxWy
         uuEiuy5Y35J08F/od99kFLXyK3Z0NYHkwtLpbAe9s0KXFAdWjwb5foutCFH5aUHPO1uE
         HuNlT3nACeMtVVV0xZMAsBtwJ70uaVIOhxgX4UjTmG+w9UzlbYSCiii453tbvIiCh5d0
         iIrA==
X-Gm-Message-State: AOAM532jJCoJPWloMC13i85TvXwx8Wm52BtvaAMRikNuj3bBoETKpxbR
        +PcZCgIlPAH9/1vdXdznP9m2tw==
X-Google-Smtp-Source: ABdhPJzGaRvaacHgysu3rMF2tlSe+VL6zv8JVFKVEjR3CD82uVhWkcNFMEg0rz44pjAhIiolMSN4dw==
X-Received: by 2002:a1c:e243:: with SMTP id z64mr4165947wmg.126.1621980919891;
        Tue, 25 May 2021 15:15:19 -0700 (PDT)
Received: from equinox (2.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.a.1.e.e.d.f.d.0.b.8.0.1.0.0.2.ip6.arpa. [2001:8b0:dfde:e1a0::2])
        by smtp.gmail.com with ESMTPSA id 10sm4134722wmi.7.2021.05.25.15.15.18
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Tue, 25 May 2021 15:15:19 -0700 (PDT)
Date:   Tue, 25 May 2021 23:15:17 +0100
From:   Phillip Potter <phil@philpotter.co.uk>
To:     Mark Brown <broonie@kernel.org>
Cc:     Sasha Levin <sashal@kernel.org>, linux-kernel@vger.kernel.org,
        stable@vger.kernel.org,
        Greg Kroah-Hartman <gregkh@linuxfoundation.org>,
        alsa-devel@alsa-project.org
Subject: Re: [PATCH AUTOSEL 5.10 30/62] ASoC: rt5645: add error checking to
 rt5645_probe function
Message-ID: <YK129caVtNBthNDG@equinox>
References: <20210524144744.2497894-1-sashal@kernel.org>
 <20210524144744.2497894-30-sashal@kernel.org>
 <YK1w+H70aqLGDaDl@sirena.org.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <YK1w+H70aqLGDaDl@sirena.org.uk>
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Tue, May 25, 2021 at 10:49:44PM +0100, Mark Brown wrote:
> On Mon, May 24, 2021 at 10:47:11AM -0400, Sasha Levin wrote:
> > From: Phillip Potter <phil@philpotter.co.uk>
> > 
> > [ Upstream commit 5e70b8e22b64eed13d5bbebcb5911dae65bf8c6b ]
> > 
> > Check for return value from various snd_soc_dapm_* calls, as many of
> > them can return errors and this should be handled. Also, reintroduce
> > the allocation failure check for rt5645->eq_param as well. Make all
> 
> Now I've looked at the patch I don't think it's appropriate for
> stable, it's essentially equivalent to a patch that adds -Werror
> - the changes in it are upgrading things from error messages that
> would be generated by what are essentially static checks (even
> though we do do them at runtime they're on hard coded strings) to
> probe failures which would be a regression.  Unfortunately people
> do ignore warnings like that in shipping stuff so it's possible
> it's happening, we could do an audit to see if it is but it seems
> like more effort than it's worth.
> 
> The only case I can think where it might help is if we're
> managing to OOM during probe() but that feels very unlikely to
> happen, and improved handling unlikely to make substantial
> difference compared to the risk that the routing warnings are
> triggering but being ignored so someone's sound stops working due
> to a stable update.  Otherwise it won't do much so why risk it?

Dear Mark,

So I frankly don't have the experience to disagree with you :-) Your
reasoning certainly seems sound to me. My original motivation for the
patch (after discussion with others within the mentorship process) was
that some other sound SoC drivers do this, an example being the Ux500. I
defer to the decision of the community as a whole of course, and am
happy with whatever is decided.

Regards,
Phil
