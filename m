Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 1FB4232551E
	for <lists+linux-kernel@lfdr.de>; Thu, 25 Feb 2021 19:06:06 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S233230AbhBYSFx (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Thu, 25 Feb 2021 13:05:53 -0500
Received: from mx2.suse.de ([195.135.220.15]:38776 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S233491AbhBYSCk (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 25 Feb 2021 13:02:40 -0500
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
        by mx2.suse.de (Postfix) with ESMTP id AAD6AAD57;
        Thu, 25 Feb 2021 18:01:59 +0000 (UTC)
Date:   Thu, 25 Feb 2021 19:01:59 +0100
Message-ID: <s5hft1kni08.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Heinz Diehl <htd+ml@fritha.org>
Cc:     linux-kernel@vger.kernel.org, lpoetter@redhat.com
Subject: Re: [BISECTED] Kernel 5.11.x breaks pulseaudio
In-Reply-To: <YDfeSZjdNKFcNKN8@fritha.org>
References: <YDfYAYCaC9KDc1F0@fritha.org>
        <s5him6gnkdu.wl-tiwai@suse.de>
        <YDfeSZjdNKFcNKN8@fritha.org>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Thu, 25 Feb 2021 18:28:41 +0100,
Heinz Diehl wrote:
> 
> On 25.02.2021, Takashi Iwai wrote:
> 
> > It's no regression but the right behavior.  This indicates that you're
> > trying a stream in 44.1kHz in one side of the full duplex stream while
> > 48kHz in another rate, and this cannot work properly with the implicit
> > feedback devices.
> [....]
> 
> Well, I'm by no means an audio or recording professional, but if what you describe
> is the correct behavior, it means that absolutely all audio files played on
> my machine always will be resampled to 44.1kHz. Youtube from native 48kHz,
> highres audio 24/96, virtually anything I play. Could that be correct? And
> what can I do to be able to listen to highres audio again?

As already mentioned, it's about the sample rate of full duplex
streams, i.e. both playback and capture streams need to be aligned to
the same rate.  IOW, if both streams are in the same 48kHz, it should
be fine as is.

Check which streams are running when you get the unexpected sample
rate by inspecting /proc/asound/card*/pcm* entries.


Takashi
