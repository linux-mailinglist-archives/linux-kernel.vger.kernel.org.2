Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 01C0930CE80
	for <lists+linux-kernel@lfdr.de>; Tue,  2 Feb 2021 23:12:34 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S234631AbhBBWMD (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Tue, 2 Feb 2021 17:12:03 -0500
Received: from mout.gmx.net ([212.227.17.20]:50501 "EHLO mout.gmx.net"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S231630AbhBBWLj (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Tue, 2 Feb 2021 17:11:39 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=gmx.net;
        s=badeba3b8450; t=1612303791;
        bh=HLb4PpGG+xhwtEENTNP+HVySOBz0VCi6xxLCr8rQ1OY=;
        h=X-UI-Sender-Class:From:To:Cc:Subject:Date:In-Reply-To:References;
        b=Z+VPI2dp3A5zreX5haymXrxWHSviqtLbXUnunFY6Pin3fabgjrxFNb/ebGRQnFl9S
         gBIL/5+Opg0sDlDov2YtMIclzurNRod80bs8hMho6c2skeVOHXGsgG9/Z6838F7Oj4
         btQdJG+qk55MDpGqUx6aEo9pxO98ZA0YCdgl4u6w=
X-UI-Sender-Class: 01bb95c1-4bf8-414a-932a-4f6e2808ef9c
Received: from Venus.fritz.box ([78.42.220.31]) by mail.gmx.net (mrgmx104
 [212.227.17.168]) with ESMTPSA (Nemesis) id 1MLi8m-1lOakh1Dfc-00HdKL; Tue, 02
 Feb 2021 23:09:51 +0100
From:   Lino Sanfilippo <LinoSanfilippo@gmx.de>
To:     peterhuewe@gmx.de, jarkko@kernel.org
Cc:     jgg@ziepe.ca, stefanb@linux.vnet.ibm.com,
        linux-integrity@vger.kernel.org, linux-kernel@vger.kernel.org,
        LinoSanfilippo@gmx.de, Lino Sanfilippo <l.sanfilippo@kunbus.com>
Subject: [PATCH v2 1/3] tpm: fix reference counting for struct tpm_chip
Date:   Tue,  2 Feb 2021 23:09:01 +0100
Message-Id: <1612303743-29017-2-git-send-email-LinoSanfilippo@gmx.de>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1612303743-29017-1-git-send-email-LinoSanfilippo@gmx.de>
References: <1612303743-29017-1-git-send-email-LinoSanfilippo@gmx.de>
MIME-Version: 1.0
Content-Transfer-Encoding: base64
X-Provags-ID: V03:K1:mLXO5LtC7P7AQR0nQIBY01t9pCDwvWLDB3WWSnCLcybQxqr7TzG
 1R11v0VSMOqmyVvkuxTDR3ROBtvfD3OCyMcFvJMVuAr1XlDikuaiSG8Vnla4muHegTKjMDB
 IelGwQloLVkhMPVq8ZMQm9IyxxGx3jLpvg47nePluWBdGpWVLoDX5L20q0OkAr6UOQto4Mo
 WHNMoTM6FQIiUuF6ZWvdg==
X-Spam-Flag: NO
X-UI-Out-Filterresults: notjunk:1;V03:K0:qqgZ7/ll1Yo=:xf7L18NPj37vmWReubX3Oy
 /xxKIC7+sNQLOl0T6x6EWSIijVFAFug+GHTTMjfzHpgq7hCXDIOkPcbj9hLGrSMONkNRMojPi
 W4z+GizbzwoSoH0SsfBPisUmu/RBIhCxhSIUbyK89u3HOwpEpUVoKH10+wwmO2IxJdcVDajY4
 v1wyab5iyCazKOYDUH4GoPYBHBBmB4xcpf50ierZx+nvK0/TpjfgeLt4ADRCvitccyCsTDpEN
 bunAyLZJlIDFh91/Ie5p413VKacpNylUcYR6K5iYM49NdKcnHnwAn8742P2A/buFcZq0n5vVV
 SUk4QbbMYpCzh1l3tF52sHkel74IM38BhFS9qrxE4byPxf+XGnNQ7coJn2Vuxen75gqkFnem+
 2HQSM11dFG4TMvCE83V4B3sJ1j5rul8exKtvCofxzbxjwu8HtLksROAcToq7UvcFUYJiyuRWY
 NdmKe64Iax6InfuiyqEDZiOZ5euEryySWmURFtcnwHpc8ZtxBtNrycBLkTWLC9ZecYGSkk0nx
 UtcEgslRtAVbnuNVhsOeeuMbtLI2AtG81jHdUglYwgPUGWeHNwQGDB1gvAae9vCPvZIkXMBcy
 ALyWb59pQN2EnpuyQVjSsudCRwg7BJ0540mq3NfUc+HEsVwhUnWQ/kSOmwP5v30JvhWOiBThL
 TTCHz+rFHtgAtVpv5N8gTNxbcnUp6RSqw90pYqiMetDVEezSDjJ6cqxYsaTW0mnRio/dhoiGA
 r0glS06QZCR1Oc8SRKpq5da5C5ljCJ+7CHGVgLehn/enh0e8q1gdGxBtZUiuT/T7KsoPix+y4
 a+dtL5UiTaOLppDyRMk3ZB8jz0zmsU0slJtu3aKxyffheygjKOMh6EII1LQ8+Hqt1/Vb69nmW
 a4jMSpTY5HEWvPU90L8g==
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

RnJvbTogTGlubyBTYW5maWxpcHBvIDxsLnNhbmZpbGlwcG9Aa3VuYnVzLmNvbT4KClRoZSBmb2xs
b3dpbmcgc2VxdWVuY2Ugb2Ygb3BlcmF0aW9ucwoKMS4gb3BlbiBkZXZpY2UgL2Rldi90cG1ybQoy
LiByZW1vdmUgdGhlIHJlZ2lzdGVyZWQgdHBtIGNoaXAgZHJpdmVyCjMuIHBlcmZvcm0gYSB3cml0
ZSgpIHRvIC9kZXYvdHBtcm0KCnJlc3VsdHMgaW4gYSByZWZjb3VudCB3YXJuaW5nOgoKLS0tLS0t
LS0tLS0tWyBjdXQgaGVyZSBdLS0tLS0tLS0tLS0tCldBUk5JTkc6IENQVTogMyBQSUQ6IDExNjEg
YXQgbGliL3JlZmNvdW50LmM6MjUga29iamVjdF9nZXQrMHhhMC8weGE0CnJlZmNvdW50X3Q6IGFk
ZGl0aW9uIG9uIDA7IHVzZS1hZnRlci1mcmVlLgpNb2R1bGVzIGxpbmtlZCBpbjogdHBtX3Rpc19z
cGkgdHBtX3Rpc19jb3JlIHRwbSBtZGlvX2JjbV91bmltYWMgYnJjbWZtYWMKc2hhMjU2X2dlbmVy
aWMgbGlic2hhMjU2IHNoYTI1Nl9hcm0gaGNpX3VhcnQgYnRiY20gYmx1ZXRvb3RoIGNmZzgwMjEx
IHZjNApicmNtdXRpbCBlY2RoX2dlbmVyaWMgZWNjIHNuZF9zb2NfY29yZSBjcmMzMl9hcm1fY2Ug
bGliYWVzCnJhc3BiZXJyeXBpX2h3bW9uIGFjOTdfYnVzIHNuZF9wY21fZG1hZW5naW5lIGJjbTI3
MTFfdGhlcm1hbCBzbmRfcGNtCnNuZF90aW1lciBnZW5ldCBzbmQgcGh5X2dlbmVyaWMgc291bmRj
b3JlIFtsYXN0IHVubG9hZGVkOiBzcGlfYmNtMjgzNV0KQ1BVOiAzIFBJRDogMTE2MSBDb21tOiBo
b2xkX29wZW4gTm90IHRhaW50ZWQgNS4xMC4wbHMtbWFpbi1kaXJ0eSAjMgpIYXJkd2FyZSBuYW1l
OiBCQ00yNzExCls8YzA0MTBjM2M+XSAodW53aW5kX2JhY2t0cmFjZSkgZnJvbSBbPGMwNDBiNTgw
Pl0gKHNob3dfc3RhY2srMHgxMC8weDE0KQpbPGMwNDBiNTgwPl0gKHNob3dfc3RhY2spIGZyb20g
WzxjMTA5MjE3ND5dIChkdW1wX3N0YWNrKzB4YzQvMHhkOCkKWzxjMTA5MjE3ND5dIChkdW1wX3N0
YWNrKSBmcm9tIFs8YzA0NDVhMzA+XSAoX193YXJuKzB4MTA0LzB4MTA4KQpbPGMwNDQ1YTMwPl0g
KF9fd2FybikgZnJvbSBbPGMwNDQ1YWE4Pl0gKHdhcm5fc2xvd3BhdGhfZm10KzB4NzQvMHhiOCkK
WzxjMDQ0NWFhOD5dICh3YXJuX3Nsb3dwYXRoX2ZtdCkgZnJvbSBbPGMwODQzNWQwPl0gKGtvYmpl
Y3RfZ2V0KzB4YTAvMHhhNCkKWzxjMDg0MzVkMD5dIChrb2JqZWN0X2dldCkgZnJvbSBbPGJmMGE3
MTVjPl0gKHRwbV90cnlfZ2V0X29wcysweDE0LzB4NTQgW3RwbV0pCls8YmYwYTcxNWM+XSAodHBt
X3RyeV9nZXRfb3BzIFt0cG1dKSBmcm9tIFs8YmYwYTdkNmM+XSAodHBtX2NvbW1vbl93cml0ZSsw
eDM4LzB4NjAgW3RwbV0pCls8YmYwYTdkNmM+XSAodHBtX2NvbW1vbl93cml0ZSBbdHBtXSkgZnJv
bSBbPGMwNWE3YWMwPl0gKHZmc193cml0ZSsweGM0LzB4M2MwKQpbPGMwNWE3YWMwPl0gKHZmc193
cml0ZSkgZnJvbSBbPGMwNWE3ZWU0Pl0gKGtzeXNfd3JpdGUrMHg1OC8weGNjKQpbPGMwNWE3ZWU0
Pl0gKGtzeXNfd3JpdGUpIGZyb20gWzxjMDQwMDFhMD5dIChyZXRfZmFzdF9zeXNjYWxsKzB4MC8w
eDRjKQpFeGNlcHRpb24gc3RhY2soMHhjMjI2YmZhOCB0byAweGMyMjZiZmYwKQpiZmEwOiAgICAg
ICAgICAgICAgICAgICAwMDAwMDAwMCAwMDAxMDViNCAwMDAwMDAwMyBiZWFmZTY2NCAwMDAwMDAx
NCAwMDAwMDAwMApiZmMwOiAwMDAwMDAwMCAwMDAxMDViNCAwMDAxMDNmOCAwMDAwMDAwNCAwMDAw
MDAwMCAwMDAwMDAwMCBiNmY5YzAwMCBiZWFmZTY4NApiZmUwOiAwMDAwMDA2YyBiZWFmZTY0OCAw
MDAxMDU2YyBiNmViNjk0NAotLS1bIGVuZCB0cmFjZSBkNGI4NDA5ZGVmOWI4YjFmIF0tLS0KClRo
ZSByZWFzb24gaXMgYW4gYXR0ZW1wdCB0byBnZXQgdGhlIGNoaXAtPmRldiByZWZlcmVuY2UgKHNl
ZQp0cG1fdHJ5X2dldF9vcHMoKSkgYWx0aG91Z2ggdGhlIGxhc3QgcmVmZXJlbmNlIHRvIHRoaXMg
ZGV2aWNlIGhhcyBhbHJlYWR5CmJlZW4gcmVsZWFzZWQgd2l0aCB0aGUgdW5yZWdpc3RyYXRpb24g
b2YgdGhlIGNoaXAgZHJpdmVyLgoKQXMgZmFyIGFzIEkgdW5kZXJzdGFuZCwgdGhlIGhpc3Rvcnkg
b2YgdGhpcyBidWcgaXMgYXMgZm9sbG93czoKCkNvbW1pdCBmZGM5MTVmN2Y3MTkgKCJ0cG06IGV4
cG9zZSBzcGFjZXMgdmlhIGEgZGV2aWNlIGxpbmsgL2Rldi90cG1ybTxuPiIpCmludHJvZHVjZWQg
dGhlIHN1cHBvcnQgZm9yIC9kZXYvdHBtcm0uIEJlc2lkZSB0aGUgbmV3IGRldmljZSBjaGlwLT5k
ZXZzCnRoaXMgY29kZSBpbnRyb2R1Y2VkIHRoZSB0YWtpbmcgb2YgYW4gZXh0cmEgcmVmZXJlbmNl
IHRvIGNoaXAtPmRldiB0bwplbnN1cmUgdGhhdCB0aGlzIGRldmljZSBpcyBub3QgcmVsZWFzZWQg
YXMgbG9uZyBhcyAvZGV2L3RwbXJtIGlzIHN0aWxsIGluCnVzZToKCisgICAgICAgY2hpcC0+ZGV2
cy5yZWxlYXNlID0gdHBtX2RldnNfcmVsZWFzZTsKKyAgICAgICAvKiBnZXQgZXh0cmEgcmVmZXJl
bmNlIG9uIG1haW4gZGV2aWNlIHRvIGhvbGQgb24KKyAgICAgICAgKiBiZWhhbGYgb2YgZGV2cy4g
IFRoaXMgaG9sZHMgdGhlIGNoaXAgc3RydWN0dXJlCisgICAgICAgICogd2hpbGUgY2RldnMgaXMg
aW4gdXNlLiAgVGhlIGNvcnJlc3BvbmRpbmcgcHV0CisgICAgICAgICogaXMgaW4gdGhlIHRwbV9k
ZXZzX3JlbGVhc2UKKyAgICAgICAgKi8KClRoZSBleHRyYSByZWZlcmVuY2UgdG8gY2hpcC0+ZGV2
IHdhcyBzdXBwb3NlZCB0byBiZSByZWxlYXNlZCBhcyBzb29uIGFzIHRoZQpyZWZlcmVuY2UgdG8g
Y2hpcC0+ZGV2cyB3YXMgZnJlZWQ6Cgorc3RhdGljIHZvaWQgdHBtX2RldnNfcmVsZWFzZShzdHJ1
Y3QgZGV2aWNlICpkZXYpCit7CisgICAgICAgc3RydWN0IHRwbV9jaGlwICpjaGlwID0gY29udGFp
bmVyX29mKGRldiwgc3RydWN0IHRwbV9jaGlwLCBkZXZzKTsKKworICAgICAgIC8qIHJlbGVhc2Ug
dGhlIG1hc3RlciBkZXZpY2UgcmVmZXJlbmNlICovCisgICAgICAgcHV0X2RldmljZSgmY2hpcC0+
ZGV2KTsKK30KCkhvd2V2ZXIgdGhlIGNvZGUgZGlkIG5vdCB3b3JrIGFzIGV4cGVjdGVkLCBiZWNh
dXNlIHRoZSByZWZlcmVuY2UgdG8KY2hpcC0+ZGV2cyB3YXMgbmV2ZXIgcmVsZWFzZWQuIFRodXMg
dHBtX2RldnNfcmVsZWFzZSgpIHdhcyBuZXZlciBjYWxsZWQKd2hpY2ggaW4gdHVybiBhbHNvIHBy
ZXZlbnRlZCB0aGUgZXh0cmEgcmVmZXJlbmNlIHRvIGNoaXAtPmRldiBmcm9tIGJlaW5nCnJlbGVh
c2VkLgoKVGhpcyBsZWQgdG8gYmVoYXZpb3VyIHdoaWNoIGNvbW1pdCA4OTc5YjAyYWFmMWQgKCJ0
cG06IEZpeCByZWZlcmVuY2UgY291bnQKdG8gbWFpbiBkZXZpY2UiKSB0cmllZCB0byBmaXggYXMg
YW4gZXhjZXJwdCBvZiB0aGUgY29tbWl0IG1lc3NhZ2Ugc2hvd3M6CgoiVGhlIG1haW4gZGV2aWNl
IGlzIGN1cnJlbnRseSBub3QgcHJvcGVybHkgcmVsZWFzZWQgZHVlIHRvIG9uZSBhZGRpdGlvbmFs
CiByZWZlcmVuY2UgdG8gdGhlICdkZXZzJyBkZXZpY2Ugd2hpY2ggaXMgb25seSByZWxlYXNlZCBp
biBjYXNlIG9mIGEgVFBNIDIuCiBTbywgYWxzbyBnZXQgdGhlIGFkZGl0aW9uYWwgcmVmZXJlbmNl
IG9ubHkgaW4gY2FzZSBvZiBhIFRQTTIuIgoKSW5zdGVhZCBvZiBhZGRpbmcgdGhlIG1pc3Npbmcg
cHV0IGZvciBjaGlwLT5kZXZzLCB0aGlzIHBhdGNoIGNob3NlIGFub3RoZXIKYXBwcm9hY2ggYnkg
b25seSB0YWtpbmcgdGhlIHJlZmVyZW5jZSBpbiBjYXNlIG9mIFRQTTI6CgorICAgICAgIGlmIChj
aGlwLT5mbGFncyAmIFRQTV9DSElQX0ZMQUdfVFBNMikKKyAgICAgICAgICAgICAgIGdldF9kZXZp
Y2UoJmNoaXAtPmRldik7CgpUaGlzIGZpeGVkIHRoZSBub24tVFBNMiBjYXNlIGJ1dCBsZWZ0IHRo
ZSBUUE0yIGNhc2Ugd2l0aG91dCB0aGUgcmVxdWlyZWQKZXh0cmEgcmVmZXJlbmNlLCBzaW5jZSB0
aGVyZSBpcyBubyBjb2RlIHBhdGggdGhhdCBldmVyIHNldHMgdGhlIGZsYWcKVFBNX0NISVBfRkxB
R19UUE0yLCB3aGljaCBpcyB0aGUgc2l0dWF0aW9uIHdlIGhhdmUgdG9kYXkuCgpUbyBmaXggdGhp
cwoKMS4gcmV2ZXJ0IGNvbW1pdCA4OTc5YjAyYWFmMWQgKCJ0cG06IEZpeCByZWZlcmVuY2UgY291
bnQgdG8gbWFpbiBkZXZpY2UiKQp0byBtYWtlIHN1cmUgdGhlIGV4dHJhIHJlZmVyZW5jZSBpcyB0
YWtlbiB1bmNvbmRpdGlvbmFsbHkgYXMgcHJvcG9zZWQgYnkKY29tbWl0IGZkYzkxNWY3ZjcxOSAo
InRwbTogZXhwb3NlIHNwYWNlcyB2aWEgYSBkZXZpY2UgbGluayAvZGV2L3RwbXJtPG4+IikKCjIu
IGZpeCBjb21taXQgZmRjOTE1ZjdmNzE5ICgidHBtOiBleHBvc2Ugc3BhY2VzIHZpYSBhIGRldmlj
ZSBsaW5rCiAvZGV2L3RwbXJtPG4+IikgYnkgYWRkaW5nIGFuIGFjdGlvbiBoYW5kbGVyIHRvIGRv
IHRoZSBtaXNzaW5nIHB1dCB0bwpjaGlwLT5kZXZzLiBUaGlzIGV2ZW50dWFsbHkgcmVzdWx0cyBp
biB0aGUgY2FsbCBvZiBmdW5jdGlvbgp0cG1fZGV2c19yZWxlYXNlKCkgd2hpY2ggaW4gdHVybiBw
ZXJmb3JtcyB0aGUgZmluYWwgcHV0IHRvIHRoZSBleHRyYQpyZWZlcmVuY2UgdG8gY2hpcC0+ZGV2
LgoKRml4ZXM6IGZkYzkxNWY3ZjcxOSAoInRwbTogZXhwb3NlIHNwYWNlcyB2aWEgYSBkZXZpY2Ug
bGluayAvZGV2L3RwbXJtPG4+IikKRml4ZXM6IDg5NzliMDJhYWYxZCAoInRwbTogRml4IHJlZmVy
ZW5jZSBjb3VudCB0byBtYWluIGRldmljZSIpClNpZ25lZC1vZmYtYnk6IExpbm8gU2FuZmlsaXBw
byA8bC5zYW5maWxpcHBvQGt1bmJ1cy5jb20+Ci0tLQogZHJpdmVycy9jaGFyL3RwbS90cG0tY2hp
cC5jICAgICAgIHwgMTggKysrKysrKysrKysrKysrLS0tCiBkcml2ZXJzL2NoYXIvdHBtL3RwbV9m
dHBtX3RlZS5jICAgfCAgMiArKwogZHJpdmVycy9jaGFyL3RwbS90cG1fdnRwbV9wcm94eS5jIHwg
IDEgKwogMyBmaWxlcyBjaGFuZ2VkLCAxOCBpbnNlcnRpb25zKCspLCAzIGRlbGV0aW9ucygtKQoK
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvY2hhci90cG0vdHBtLWNoaXAuYyBiL2RyaXZlcnMvY2hhci90
cG0vdHBtLWNoaXAuYwppbmRleCBkZGFlY2ViLi4zYWNlMTk5IDEwMDY0NAotLS0gYS9kcml2ZXJz
L2NoYXIvdHBtL3RwbS1jaGlwLmMKKysrIGIvZHJpdmVycy9jaGFyL3RwbS90cG0tY2hpcC5jCkBA
IC0zNjAsOCArMzYwLDcgQEAgc3RydWN0IHRwbV9jaGlwICp0cG1fY2hpcF9hbGxvYyhzdHJ1Y3Qg
ZGV2aWNlICpwZGV2LAogCSAqIHdoaWxlIGNkZXZzIGlzIGluIHVzZS4gIFRoZSBjb3JyZXNwb25k
aW5nIHB1dAogCSAqIGlzIGluIHRoZSB0cG1fZGV2c19yZWxlYXNlIChUUE0yIG9ubHkpCiAJICov
Ci0JaWYgKGNoaXAtPmZsYWdzICYgVFBNX0NISVBfRkxBR19UUE0yKQotCQlnZXRfZGV2aWNlKCZj
aGlwLT5kZXYpOworCWdldF9kZXZpY2UoJmNoaXAtPmRldik7CiAKIAlpZiAoY2hpcC0+ZGV2X251
bSA9PSAwKQogCQljaGlwLT5kZXYuZGV2dCA9IE1LREVWKE1JU0NfTUFKT1IsIFRQTV9NSU5PUik7
CkBAIC00MjIsOCArNDIxLDIxIEBAIHN0cnVjdCB0cG1fY2hpcCAqdHBtbV9jaGlwX2FsbG9jKHN0
cnVjdCBkZXZpY2UgKnBkZXYsCiAJcmMgPSBkZXZtX2FkZF9hY3Rpb25fb3JfcmVzZXQocGRldiwK
IAkJCQkgICAgICAodm9pZCAoKikodm9pZCAqKSkgcHV0X2RldmljZSwKIAkJCQkgICAgICAmY2hp
cC0+ZGV2KTsKLQlpZiAocmMpCisJaWYgKHJjKSB7CisJCXB1dF9kZXZpY2UoJmNoaXAtPmRldnMp
OwogCQlyZXR1cm4gRVJSX1BUUihyYyk7CisJfQorCisJcmMgPSBkZXZtX2FkZF9hY3Rpb25fb3Jf
cmVzZXQocGRldiwKKwkJCQkgICAgICAodm9pZCAoKikodm9pZCAqKSkgcHV0X2RldmljZSwKKwkJ
CQkgICAgICAmY2hpcC0+ZGV2cyk7CisJaWYgKHJjKSB7CisJCWRldm1fcmVtb3ZlX2FjdGlvbihw
ZGV2LAorCQkJCSAgICh2b2lkICgqKSh2b2lkICopKSBwdXRfZGV2aWNlLAorCQkJCSAgICZjaGlw
LT5kZXYpOworCQlwdXRfZGV2aWNlKCZjaGlwLT5kZXYpOworCQlyZXR1cm4gRVJSX1BUUihyYyk7
CisJfQogCiAJZGV2X3NldF9kcnZkYXRhKHBkZXYsIGNoaXApOwogCmRpZmYgLS1naXQgYS9kcml2
ZXJzL2NoYXIvdHBtL3RwbV9mdHBtX3RlZS5jIGIvZHJpdmVycy9jaGFyL3RwbS90cG1fZnRwbV90
ZWUuYwppbmRleCAyY2NkZjhhLi44Mjg1OGMyIDEwMDY0NAotLS0gYS9kcml2ZXJzL2NoYXIvdHBt
L3RwbV9mdHBtX3RlZS5jCisrKyBiL2RyaXZlcnMvY2hhci90cG0vdHBtX2Z0cG1fdGVlLmMKQEAg
LTI4Niw2ICsyODYsNyBAQCBzdGF0aWMgaW50IGZ0cG1fdGVlX3Byb2JlKHN0cnVjdCBkZXZpY2Ug
KmRldikKIAogb3V0X2NoaXA6CiAJcHV0X2RldmljZSgmcHZ0X2RhdGEtPmNoaXAtPmRldik7CisJ
cHV0X2RldmljZSgmcHZ0X2RhdGEtPmNoaXAtPmRldnMpOwogb3V0X2NoaXBfYWxsb2M6CiAJdGVl
X3NobV9mcmVlKHB2dF9kYXRhLT5zaG0pOwogb3V0X3NobV9hbGxvYzoKQEAgLTMxOCw2ICszMTks
NyBAQCBzdGF0aWMgaW50IGZ0cG1fdGVlX3JlbW92ZShzdHJ1Y3QgZGV2aWNlICpkZXYpCiAJdHBt
X2NoaXBfdW5yZWdpc3RlcihwdnRfZGF0YS0+Y2hpcCk7CiAKIAkvKiBmcmVlcyBjaGlwICovCisJ
cHV0X2RldmljZSgmcHZ0X2RhdGEtPmNoaXAtPmRldnMpOwogCXB1dF9kZXZpY2UoJnB2dF9kYXRh
LT5jaGlwLT5kZXYpOwogCiAJLyogRnJlZSB0aGUgc2hhcmVkIG1lbW9yeSBwb29sICovCmRpZmYg
LS1naXQgYS9kcml2ZXJzL2NoYXIvdHBtL3RwbV92dHBtX3Byb3h5LmMgYi9kcml2ZXJzL2NoYXIv
dHBtL3RwbV92dHBtX3Byb3h5LmMKaW5kZXggOTFjNzcyZTMuLjk3YjYwZjggMTAwNjQ0Ci0tLSBh
L2RyaXZlcnMvY2hhci90cG0vdHBtX3Z0cG1fcHJveHkuYworKysgYi9kcml2ZXJzL2NoYXIvdHBt
L3RwbV92dHBtX3Byb3h5LmMKQEAgLTUyMCw2ICs1MjAsNyBAQCBzdGF0aWMgc3RydWN0IHByb3h5
X2RldiAqdnRwbV9wcm94eV9jcmVhdGVfcHJveHlfZGV2KHZvaWQpCiAgKi8KIHN0YXRpYyBpbmxp
bmUgdm9pZCB2dHBtX3Byb3h5X2RlbGV0ZV9wcm94eV9kZXYoc3RydWN0IHByb3h5X2RldiAqcHJv
eHlfZGV2KQogeworCXB1dF9kZXZpY2UoJnByb3h5X2Rldi0+Y2hpcC0+ZGV2cyk7CiAJcHV0X2Rl
dmljZSgmcHJveHlfZGV2LT5jaGlwLT5kZXYpOyAvKiBmcmVlcyBjaGlwICovCiAJa2ZyZWUocHJv
eHlfZGV2KTsKIH0KLS0gCjIuNy40Cgo=
