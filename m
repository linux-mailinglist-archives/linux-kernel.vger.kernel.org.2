Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id E4524457C2B
	for <lists+linux-kernel@lfdr.de>; Sat, 20 Nov 2021 08:35:04 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S237054AbhKTHiE (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Sat, 20 Nov 2021 02:38:04 -0500
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:33818 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S236392AbhKTHh7 (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sat, 20 Nov 2021 02:37:59 -0500
Received: from mail-wm1-x335.google.com (mail-wm1-x335.google.com [IPv6:2a00:1450:4864:20::335])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 922B0C061574;
        Fri, 19 Nov 2021 23:34:54 -0800 (PST)
Received: by mail-wm1-x335.google.com with SMTP id f7-20020a1c1f07000000b0032ee11917ceso9244512wmf.0;
        Fri, 19 Nov 2021 23:34:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20210112;
        h=from:to:cc:subject:date:message-id:mime-version
         :content-transfer-encoding;
        bh=ASlC5C6m5gJ71BapJOvaJHGwBoSPe7ieP2AA6vAXZno=;
        b=dlwIDWGVloqrbBqRI+ShKyZCLShiBh+hlboknMoVoM1P0kJMYU4Kzixn2WvN9WfWea
         lXpM8+Xkr40Ijo8gDK+le2MgFM08l4PfAbS81bFVPfRi+S/wonKeYRSyvv/HaMIFeVU3
         Auz5MIs+0CJFl+arDQnuiiYV8LzicecgXHQ3ULhIZScEl2MogmbperIFAYuHFrBChwlI
         oglMyJzv5rwN9ikopUGJ9s8pc1+lIGcwgflMpjgiDj41B7UH3Sg5Q31+OWSd6LlFXeQY
         46IYZZertIfffyvHAKX9b3LPMhAR+l0o79vMj3SNHjdgW0RBFztVrOCnxT6fAKia9eSs
         2Fgw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20210112;
        h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
         :content-transfer-encoding;
        bh=ASlC5C6m5gJ71BapJOvaJHGwBoSPe7ieP2AA6vAXZno=;
        b=ha9ObA0aFsnwHi4329hq8lwdFzLcuuaOGXaEcXAuErNUYY1YCUzWjGkDBxDrBSMkgm
         XhiSsR+i0557O4Ib608g0n4BfdBa/EeUx1u/6IDAqunTO5RcUJ4J0TT53VV4ny6pZ3cO
         HviXHLIjLH0O52ZpHPqK98tMPeGALF3dE3E9SgiRBfHL7ddMxvEFSTFb8S0UoKXlgUWG
         s7gLH04YD5wlT7JHszPWgdonC7k/5yA8vt5B5PjDpYce8lQ6/TybI2wnzj7kYmz7HkIf
         G9Ii5KqHfSseXZV+bcLLm3kMHoTYjk6CmAOw0TbABtNVwHBthNJIlxaZ94bFLNYZrPL3
         5tiA==
X-Gm-Message-State: AOAM5303MYuZ6Q/bAQh1e4Jrgh+JUwLW5s5OXFePwDoavFYKGdJ7KWsM
        gWl0DxYd7GF3Eg+JPsBooT0=
X-Google-Smtp-Source: ABdhPJxyLzieymM7+bifW9sxG8pozDBwHv2HD3dn9fJQ6KCugye4Po8a6hhHGQjYlvZa/lLvbQcPlg==
X-Received: by 2002:a7b:cc8f:: with SMTP id p15mr8117915wma.158.1637393693154;
        Fri, 19 Nov 2021 23:34:53 -0800 (PST)
Received: from kista.localdomain (cpe-86-58-29-253.static.triera.net. [86.58.29.253])
        by smtp.gmail.com with ESMTPSA id a141sm13776345wme.37.2021.11.19.23.34.52
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Fri, 19 Nov 2021 23:34:52 -0800 (PST)
From:   Jernej Skrabec <jernej.skrabec@gmail.com>
To:     mripard@kernel.org, wens@csie.org
Cc:     robh+dt@kernel.org, devicetree@vger.kernel.org,
        linux-arm-kernel@lists.infradead.org, linux-sunxi@lists.linux.dev,
        linux-kernel@vger.kernel.org,
        Jernej Skrabec <jernej.skrabec@gmail.com>
Subject: [PATCH 0/2] dts: Add CEC clock to DW HDMI
Date:   Sat, 20 Nov 2021 08:34:46 +0100
Message-Id: <20211120073448.32480-1-jernej.skrabec@gmail.com>
X-Mailer: git-send-email 2.34.0
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Experimentation proved that CEC controller in H3-like DW-HDMI core
depends on 32 kHz clock output from RTC. If board has external 32768 Hz
crystal, HDMI CEC always work. However, if external crystal is missing
and 32 kHz clock is generated by internal oscillator, CEC communication
may or may not work, depending on accuracy. Changing internal oscillator
prescaler can make CEC work.

This was totally missed when implementing HDMI support, because user
manual has no CEC information besides the fact that it exists.

Please take a look.

Best regards,
Jernej

Jernej Skrabec (2):
  arm64: dts: allwinner: a64: Add CEC clock to HDMI
  ARM: dts: sunxi: Add CEC clock to DW-HDMI

 arch/arm/boot/dts/sun8i-r40.dtsi              | 4 ++--
 arch/arm/boot/dts/sunxi-h3-h5.dtsi            | 4 ++--
 arch/arm64/boot/dts/allwinner/sun50i-a64.dtsi | 4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)

-- 
2.34.0

