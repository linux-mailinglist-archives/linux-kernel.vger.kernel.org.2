Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 274EA457CB6
	for <lists+linux-kernel@lfdr.de>; Sat, 20 Nov 2021 10:47:29 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S237186AbhKTJsI (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Sat, 20 Nov 2021 04:48:08 -0500
Received: from mail3-relais-sop.national.inria.fr ([192.134.164.104]:13649
        "EHLO mail3-relais-sop.national.inria.fr" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S237172AbhKTJsH (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sat, 20 Nov 2021 04:48:07 -0500
IronPort-HdrOrdr: =?us-ascii?q?A9a23=3Au4q4yKvdCAVvoUTMhVQAEbx+7skC1IMji2hC?=
 =?us-ascii?q?6mlwRA09TyXGra2TdaUgvyMc1gx7ZJh5o6HnBEDyewKkyXcV2/hYAV7GZmXbUQ?=
 =?us-ascii?q?STXeVfBOfZogEIeBeOvdK1t50QFJSWYeeYZTcVsS+Q2njaLz9U+qjjzEnev5a9?=
 =?us-ascii?q?854Cd2FXQpAlyz08JheQE0VwSgUDL4E+DoCg6s1OoCflUWgLb+ygb0N1EtTrlp?=
 =?us-ascii?q?nurtbLcBQGDxko5E2lljWz8oP3FBCew1M3Ty5P+7E/6mLI+jaJqplL8svLhSM0?=
 =?us-ascii?q?5VWjrqi+q+GRiuerw/b8yfT9Hw+cxDpAor4RGYFq8gpF5d1Ho2xa6OUk6y1QRP?=
 =?us-ascii?q?ibrUmhNF1d6CGdpjXIwXIg7WTvxkSfhmamqcvlRCgiA84Eno5BdADFgnBQy+2U?=
 =?us-ascii?q?/Zg7ql5xjaAneS8oXR6NluTgRlVvjA65sHAimekcgzhWVpYfcqZYqcga8FlOGJ?=
 =?us-ascii?q?kNESrm4MR/edMeRf309bJTaxeXfnrZtm5gzJilWWkyBA6PRgwHttaO2zZbkXhl?=
 =?us-ascii?q?xw8TxdAZnH0H6JUhIqM0kdjsI+BtjvVDX8UWZaVyCKMIRta2EHXERVbWPGebMT?=
 =?us-ascii?q?3cZdM6EmOIr4Sy7KQ+5emsdpBNxpM2lJPNWEgdr2Ioe071Tc2IxoBC9RrABGWx?=
 =?us-ascii?q?NA6dtv22J6IJyYEUaICbThFreWpe4/dI+c9vePEzc8zDRq5rPw=3D=3D?=
X-IronPort-AV: E=Sophos;i="5.84,326,1620684000"; 
   d="scan'208";a="399978069"
Received: from 173.121.68.85.rev.sfr.net (HELO hadrien) ([85.68.121.173])
  by mail3-relais-sop.national.inria.fr with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 20 Nov 2021 10:45:02 +0100
Date:   Sat, 20 Nov 2021 10:45:02 +0100 (CET)
From:   Julia Lawall <julia.lawall@inria.fr>
X-X-Sender: jll@hadrien
To:     Sidraya <sidraya.bj@pathpartnertech.com>,
        Praneeth Bajjuri <praneeth@ti.com>,
        Angela Stegmaier <angelabaker@ti.com>
cc:     linux-kernel@vger.kernel.org, kbuild-all@lists.01.org
Subject: [PATCH] media: platform: vxd: Kconfig: fix noderef.cocci warnings
Message-ID: <alpine.DEB.2.22.394.2111201042540.3043@hadrien>
User-Agent: Alpine 2.22 (DEB 394 2020-01-19)
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

From: kernel test robot <lkp@intel.com>

sizeof when applied to a pointer typed expression gives the size of
the pointer

Generated by: scripts/coccinelle/misc/noderef.cocci

CC: Sidraya <sidraya.bj@pathpartnertech.com>
Reported-by: kernel test robot <lkp@intel.com>
Signed-off-by: kernel test robot <lkp@intel.com>
Signed-off-by: Julia Lawall <julia.lawall@inria.fr>
---

tree:   git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git ti-rt-linux-5.10.y
head:   0c67d996db8f3c9149598bc98657ae28fee22208
commit: 97dfdd999ba7266785579c99c40a3c65e63e864a [10173/10206] media: platform: vxd: Kconfig: Add Video decoder Kconfig and Makefile
:::::: branch date: 2 days ago
:::::: commit date: 9 days ago

 work_queue.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/drivers/media/platform/vxe-vxd/common/work_queue.c
+++ b/drivers/media/platform/vxe-vxd/common/work_queue.c
@@ -39,7 +39,7 @@ void init_work(void **work_args, void *w
 	//create a link
 	struct node *link = kmalloc(sizeof(*link), GFP_KERNEL);

-	*work = kzalloc(sizeof(*work), GFP_KERNEL);
+	*work = kzalloc(sizeof(**work), GFP_KERNEL);
 	if (!(*work)) {
 		pr_err("Memory allocation failed for work_queue\n");
 		return;
@@ -62,7 +62,7 @@ void init_delayed_work(void **work_args,
 	//create a link
 	struct node *link = kmalloc(sizeof(*link), GFP_KERNEL);

-	*work = kzalloc(sizeof(*work), GFP_KERNEL);
+	*work = kzalloc(sizeof(**work), GFP_KERNEL);
 	if (!(*work)) {
 		pr_err("Memory allocation failed for delayed_work_queue\n");
 		return;
