Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 8227A3EA6B3
	for <lists+linux-kernel@lfdr.de>; Thu, 12 Aug 2021 16:42:59 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S236592AbhHLOnX (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Thu, 12 Aug 2021 10:43:23 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:51470 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S233079AbhHLOnV (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 12 Aug 2021 10:43:21 -0400
Received: from ms.lwn.net (ms.lwn.net [IPv6:2600:3c01:e000:3a1::42])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 2727BC061756;
        Thu, 12 Aug 2021 07:42:56 -0700 (PDT)
Received: from localhost (unknown [IPv6:2601:281:8300:104d::5f6])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by ms.lwn.net (Postfix) with ESMTPSA id 95F9E44A;
        Thu, 12 Aug 2021 14:42:49 +0000 (UTC)
DKIM-Filter: OpenDKIM Filter v2.11.0 ms.lwn.net 95F9E44A
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=lwn.net; s=20201203;
        t=1628779369; bh=a8LZlyseXL7U1N9SiZ6h5AOFYpay72/lYctmNRaVE0w=;
        h=From:To:Cc:Subject:In-Reply-To:References:Date:From;
        b=sxy7WUeyyGT7NSGh4nvBp44k+MrhNai/h0ktuqdhT+FftHXqHQhR+oGGxulnW1UbL
         MoNeajOvjuoe8AF3geJy0UpMb5mWgKLzio63WWbBovuuXkD8GDrAs67Pn4JOtFqwWM
         SoZNqMeQck6M+EWEJY9Id1DChWRI+W5PTLLHdNk0hUIyKRPFe+xcWLTypNylI48lrp
         Rp1Vwhm4bBZKyZWoDoeRjbjP+5cjXY4UINU2X6fy/WZMJMo2gkkeK9itKoYyJ7K58F
         uGUUfeRu6D/6KVrmVftwZxpyTjKf8LGM6Wrx8d7A4ZsE88lHqVuECYuehTvAWgTFHU
         PRC95wZApfm4g==
From:   Jonathan Corbet <corbet@lwn.net>
To:     Akira Yokosawa <akiyks@gmail.com>,
        Mauro Carvalho Chehab <mchehab@kernel.org>
Cc:     "Wu X.C." <bobwxc@email.cn>, SeongJae Park <sj38.park@gmail.com>,
        Hu Haowen <src.res@email.cn>, linux-doc@vger.kernel.org,
        linux-kernel@vger.kernel.org, Akira Yokosawa <akiyks@gmail.com>
Subject: Re: [PATCH v3 6/9] docs: pdfdocs: One-half spacing for CJK
 translations
In-Reply-To: <8e70e5ed-c0d9-a0f0-6640-a0f1ebdda6d4@gmail.com>
References: <eb8184ab-cfab-680b-f180-1157a7f709b3@gmail.com>
 <a1c19fe1-2960-1c4b-b355-7e6da13b9630@gmail.com>
 <8e70e5ed-c0d9-a0f0-6640-a0f1ebdda6d4@gmail.com>
Date:   Thu, 12 Aug 2021 08:42:48 -0600
Message-ID: <87im0a207r.fsf@meer.lwn.net>
MIME-Version: 1.0
Content-Type: text/plain
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Akira Yokosawa <akiyks@gmail.com> writes:

> On Mon, 2 Aug 2021 18:56:16 +0900, Akira Yokosawa wrote:
>> CJK documents are much easier to read with a wider baseline stretch.
>> Applying the onehalfspacing option of "setspace" package looks
>> reasonable.
>> 
>> Note: \usepackage{setspace} needs to be before that of hyperref in the
>> preamble.  The 'extrapackages' key (available since Sphinx 2.3) is for
>> this purpose.
>
> Sphinx versions < 2.3 ignore 'extrapackages' and generate LaTeX
> sources without setspace package.
> Obviously, building such LaTeX sources will end up in the error of:
>
>     ! Undefined control sequence.
>     \kerneldocCJKoff ...exeCJKinactive \singlespacing
>
> Current requirement to build pdfdocs is Sphinx 2.4.4, but LaTeX
> sources generated by 1.7.9 can at least be built prior to this change.
>
> Jon, Mauro, do you think this is a regression?

Having the build just fail that way isn't really a good thing...it would
be far better to do the baseline tweaking only with versions of sphinx
that support it or, failing that, to at least refuse to build with a
suitably informative message.

Thanks,

jon
