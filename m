Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 2167438E2C6
	for <lists+linux-kernel@lfdr.de>; Mon, 24 May 2021 10:53:16 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S232458AbhEXIyk (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Mon, 24 May 2021 04:54:40 -0400
Received: from mail.kernel.org ([198.145.29.99]:53038 "EHLO mail.kernel.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S232362AbhEXIyj (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 24 May 2021 04:54:39 -0400
Received: from disco-boy.misterjones.org (disco-boy.misterjones.org [51.254.78.96])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by mail.kernel.org (Postfix) with ESMTPSA id 931A5610A5;
        Mon, 24 May 2021 08:53:11 +0000 (UTC)
Received: from 78.163-31-62.static.virginmediabusiness.co.uk ([62.31.163.78] helo=why.misterjones.org)
        by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        (Exim 4.94.2)
        (envelope-from <maz@kernel.org>)
        id 1ll6Kj-003Asp-GG; Mon, 24 May 2021 09:53:09 +0100
Date:   Mon, 24 May 2021 09:53:08 +0100
Message-ID: <87sg2cwm17.wl-maz@kernel.org>
From:   Marc Zyngier <maz@kernel.org>
To:     Linus Walleij <linus.walleij@linaro.org>
Cc:     linux-kernel <linux-kernel@vger.kernel.org>,
        Thomas Gleixner <tglx@linutronix.de>,
        Michael Ellerman <mpe@ellerman.id.au>,
        Benjamin Herrenschmidt <benh@kernel.crashing.org>,
        Paul Mackerras <paulus@samba.org>,
        Ley Foon Tan <ley.foon.tan@intel.com>,
        Chris Zankel <chris@zankel.net>,
        Max Filippov <jcmvbkbc@gmail.com>,
        Vineet Gupta <vgupta@synopsys.com>,
        Thomas Bogendoerfer <tsbogend@alpha.franken.de>,
        Robert Jarzmik <robert.jarzmik@free.fr>,
        Russell King <linux@armlinux.org.uk>,
        Krzysztof Kozlowski <krzysztof.kozlowski@canonical.com>,
        Yoshinori Sato <ysato@users.sourceforge.jp>,
        Rich Felker <dalias@libc.org>,
        Geert Uytterhoeven <geert@linux-m68k.org>,
        Alex Deucher <alexander.deucher@amd.com>,
        Christian =?UTF-8?B?S8O2bmln?= <christian.koenig@amd.com>,
        David Airlie <airlied@linux.ie>,
        Daniel Vetter <daniel@ffwll.ch>,
        Rob Clark <robdclark@gmail.com>,
        Lee Jones <lee.jones@linaro.org>,
        Lorenzo Pieralisi <lorenzo.pieralisi@arm.com>,
        Rob Herring <robh@kernel.org>,
        Bjorn Helgaas <bhelgaas@google.com>,
        Bartosz Golaszewski <bgolaszewski@baylibre.com>,
        Android Kernel Team <kernel-team@android.com>
Subject: Re: [PATCH 00/39] irqdomain: Simplify interrupt handling
In-Reply-To: <CACRpkdZpn3x-P9rsoMUE0uG_19aG5jHWvv7FD7srtmW92Q1oag@mail.gmail.com>
References: <20210520163751.27325-1-maz@kernel.org>
        <CACRpkdZpn3x-P9rsoMUE0uG_19aG5jHWvv7FD7srtmW92Q1oag@mail.gmail.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/27.1
 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 62.31.163.78
X-SA-Exim-Rcpt-To: linus.walleij@linaro.org, linux-kernel@vger.kernel.org, tglx@linutronix.de, mpe@ellerman.id.au, benh@kernel.crashing.org, paulus@samba.org, ley.foon.tan@intel.com, chris@zankel.net, jcmvbkbc@gmail.com, vgupta@synopsys.com, tsbogend@alpha.franken.de, robert.jarzmik@free.fr, linux@armlinux.org.uk, krzysztof.kozlowski@canonical.com, ysato@users.sourceforge.jp, dalias@libc.org, geert@linux-m68k.org, alexander.deucher@amd.com, christian.koenig@amd.com, airlied@linux.ie, daniel@ffwll.ch, robdclark@gmail.com, lee.jones@linaro.org, lorenzo.pieralisi@arm.com, robh@kernel.org, bhelgaas@google.com, bgolaszewski@baylibre.com, kernel-team@android.com
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Fri, 21 May 2021 00:33:58 +0100,
Linus Walleij <linus.walleij@linaro.org> wrote:
> 
> On Thu, May 20, 2021 at 6:37 PM Marc Zyngier <maz@kernel.org> wrote:
> 
> > Wouldn't it be nice if the irqdomain
> > would cache the irq_desc instead of forcing the core code to look it
> > up on each and every interrupt? This is what this long series is all
> > about.
> 
> For gpio and pinctrl bulk conversions:
> Acked-by: Linus Walleij <linus.walleij@linaro.org>

Thanks for that.

> I agree that Rob's idea to create a bitmap walker may be helpful
> if you have the energy for it, but this as a whole is nevertheless
> good.

I'll look into that once I figure out a good solution for handling
errors, which the caller should most probably be made aware of.

> Do they have to be applied en masse?

Not necessarily. As long as the initial infrastructure is in place,
maintainers can take the subsequent patches on their own time, as all
the original APIs are preserved.

> I think there could be some clashes and new drivers that will
> create weirdness in that case so an immutable branch for
> maintainers to pull in will be needed if you want it all in the
> next merge window.
> 
> Unless you plan to merge the bottom
> patches and then let subsystem maintainers convert each
> subsystem in the next merge window.
> 
> Or a base to be pulled in and then each subsystem can
> apply the bulk conversion to their subsystem only.

This last option is my preferred approach for busy subsystems. I'm
happy to take care of irqchip and of the quieter architectures such as
NIOS2 and SH, and leave the rest to their respective maintainers.

Thanks,

	M.

-- 
Without deviation from the norm, progress is not possible.
