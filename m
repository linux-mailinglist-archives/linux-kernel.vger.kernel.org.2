Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 9A25D34BCB6
	for <lists+linux-kernel@lfdr.de>; Sun, 28 Mar 2021 16:56:12 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S231321AbhC1OzP (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Sun, 28 Mar 2021 10:55:15 -0400
Received: from mail2-relais-roc.national.inria.fr ([192.134.164.83]:7915 "EHLO
        mail2-relais-roc.national.inria.fr" rhost-flags-OK-OK-OK-OK)
        by vger.kernel.org with ESMTP id S231288AbhC1Oyr (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sun, 28 Mar 2021 10:54:47 -0400
IronPort-HdrOrdr: =?us-ascii?q?A9a23=3A82uEP6rPs2Y1CyN5O2+OGk8aV5vML9V00zAX?=
 =?us-ascii?q?/kB9WHVpW+afkN2jm+le6A/shF8qKQ0dsP2JJaXoewKjybdb+o8UVI3SLzXOnE?=
 =?us-ascii?q?uNAMVc4ZD5wzvmcheOidJ18at7aaBxBJnRADFB/LzHyTK1Gdoh39WLmZrA7Yy/?=
 =?us-ascii?q?815XQRhue+Vc6W5Ce3OmO3drTwpLD4dRLuvg2uN7oVObCAYqR/X+LlI+G8Lji/?=
 =?us-ascii?q?fouL+OW387Li9iwCSitneDyZLRMTS0ty1zbxp/hZ8EzEj+qiTcooCOjN2foyWz?=
 =?us-ascii?q?60bjq7xqpfPK6/9uI/HJrfQwQw+c8jqAVcBNf/m+sDQtpe2zrG0nmNT2rw4kL6?=
 =?us-ascii?q?1ImgLsV1DwjiHRnzTHuQxejUPK+Bu5uD/Ph+jQZBUUYvAx5r5xQ1/9zWQBm5Va?=
 =?us-ascii?q?+IZmtljp0KZ/PFfltATZo/XlcjFUunGFyEBOrccjy1h2ca5bRoR4neUkln99Id?=
 =?us-ascii?q?MlFCL+5JtPKpgfMOjsoM1yNWm3SF30hQBUsbmRd0V2JDugb2Q40/bltwR+rTRC?=
 =?us-ascii?q?42w06Pdavk5ozuNFd7B0o97nHuBDtZ1lbOM6BJgTOM4xBfGmEHHARVbiNWqdSG?=
 =?us-ascii?q?6Xb50vCjbwjL7O3Jlw2cmFEaZ4rqcPpA=3D=3D?=
X-IronPort-AV: E=Sophos;i="5.81,285,1610406000"; 
   d="scan'208";a="500366190"
Received: from 173.121.68.85.rev.sfr.net (HELO hadrien) ([85.68.121.173])
  by mail2-relais-roc.national.inria.fr with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 28 Mar 2021 16:54:45 +0200
Date:   Sun, 28 Mar 2021 16:54:45 +0200 (CEST)
From:   Julia Lawall <julia.lawall@inria.fr>
X-X-Sender: jll@hadrien
To:     Liam Girdwood <lgirdwood@gmail.com>,
        Mark Brown <broonie@kernel.org>,
        Jaroslav Kysela <perex@perex.cz>,
        Takashi Iwai <tiwai@suse.com>, Ray Jui <rjui@broadcom.com>,
        Scott Branden <sbranden@broadcom.com>
cc:     bcm-kernel-feedback-list@broadcom.com,
        Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>,
        Sumera Priyadarsini <sylphrenadin@gmail.com>,
        linux-kernel@vger.kernel.org, kbuild-all@lists.01.org
Subject: [PATCH] ASoC: cygnus: fix for_each_child.cocci warnings
Message-ID: <alpine.DEB.2.22.394.2103281651320.2854@hadrien>
User-Agent: Alpine 2.22 (DEB 394 2020-01-19)
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

From: kernel test robot <lkp@intel.com>

Function "for_each_available_child_of_node" should have of_node_put()
before return around line 1352.

Generated by: scripts/coccinelle/iterators/for_each_child.cocci

CC: Sumera Priyadarsini <sylphrenadin@gmail.com>
Reported-by: kernel test robot <lkp@intel.com>
Signed-off-by: kernel test robot <lkp@intel.com>
Signed-off-by: Julia Lawall <julia.lawall@inria.fr>
---

 cygnus-ssp.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/sound/soc/bcm/cygnus-ssp.c
+++ b/sound/soc/bcm/cygnus-ssp.c
@@ -1348,8 +1348,10 @@ static int cygnus_ssp_probe(struct platf
 					&cygnus_ssp_dai[active_port_count]);

 		/* negative is err, 0 is active and good, 1 is disabled */
-		if (err < 0)
+		if (err < 0) {
+			of_node_put(child_node);
 			return err;
+		}
 		else if (!err) {
 			dev_dbg(dev, "Activating DAI: %s\n",
 				cygnus_ssp_dai[active_port_count].name);
